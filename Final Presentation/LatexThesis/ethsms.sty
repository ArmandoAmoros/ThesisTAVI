%==============================================================================
% ETHSMS-- (ethsms.sty) Style file
% A LaTeX package providing new style definitions and commands.
% The ethsms-package defines a title page and an info page for term papers
% and master theses written at the Sensory Motor-Systems Lab
% of the Swiss Federal Institute of Technology (ETH) Zurich.
%
% ---------------------------------------------------------------------------------------------------------------
% This file is based on the ethidsc.sty from the IMRT LaTex Template by Eric Mueller (2009) 
% and Soren Ebbesen (2013).
% ---------------------------------------------------------------------------------------------------------------
%
% Revisions: 	2013-06-18  (Nicolas Gerig)
%
%==============================================================================
\def\Presentation@Version{1.1}
\NeedsTeXFormat{LaTeX2e}[1995/12/01]
\ProvidesPackage{ethsms}[2013/06/18, v. \Presentation@Version]
\typeout{providing new style definitions and commands ---}

\newif\ifingerman
\DeclareOption{german}{\global\ingermantrue}
\DeclareOption{english}{\global\ingermanfalse}

\DeclareOption{mt}{\gdef\@type{\ifingerman Masterarbeit\else Master Thesis\fi}}
\DeclareOption{bt}{\gdef\@type{\ifingerman Bachelorarbeit\else Bachelor Thesis\fi}}
\DeclareOption{st}{\gdef\@type{\ifingerman Semesterarbeit\else Semester Thesis\fi}}

\newif\ifbalgrist
\DeclareOption{balgrist}{\global\balgristtrue}
\DeclareOption{nobalgrist}{\global\balgristfalse}

\ExecuteOptions{german,st,balgrist}
\ProcessOptions

\RequirePackage[latin1]{inputenc}
\RequirePackage{amsmath,amssymb,amsthm}
\RequirePackage{graphicx}
\RequirePackage[dvips]{epsfig} 
\RequirePackage{float}
\RequirePackage{fancyhdr}
%\RequirePackage{hyperref}
\RequirePackage{pstricks,pst-plot,psfrag}
\RequirePackage{multirow}
\RequirePackage{rotating}
\RequirePackage{mcode}
\RequirePackage{units}
\RequirePackage{booktabs}
\RequirePackage[dvipdfm]{geometry}
\RequirePackage{url}

% 2012-08-18 gerigni: Allow pstricks with pdfLatex, see Screenshot for TeXworks settings
\usepackage[crop=off]{auto-pst-pdf}
\usepackage{ marvosym }
% 2013-07-09 gerigni: fix enumeration and description width to page width
\usepackage{ enumitem }
% 2013-06-10 allows to input .eps_tex files with .eps images not in root dir but in img
\graphicspath{{img/}} 

% 2014-11-21 allows to align equations groups with \begin{ceqn}
\usepackage[fleqn]{nccmath}

\ifingerman
\RequirePackage{german,ae}
\fi

\newcommand{\@supervision}{}
\newcommand{\supervision}[1]{\gdef\@supervision{#1}}

\newcommand{\@studentA}{}
\newcommand{\studentA}[1]{\gdef\@studentA{#1}}

\newif\ifstudentB
\newcommand{\@studentB}{}
\newcommand{\studentB}[1]{\gdef\@studentB{#1}\studentBtrue}

\newcommand{\@ethidA}{}
\newcommand{\ethidA}[1]{\gdef\@ethidA{#1}}

\newcommand{\@ethidB}{}
\newcommand{\ethidB}[1]{\gdef\@ethidB{#1}}

\newcommand{\@semesterA}{}
\newcommand{\semesterA}[1]{\gdef\@semesterA{#1}}

\newcommand{\@semesterB}{}
\newcommand{\semesterB}[1]{\gdef\@semesterB{#1}}

\newcommand{\@emailA}{}
\newcommand{\emailA}[1]{\gdef\@emailA{#1}}

\newcommand{\@emailB}{}
\newcommand{\emailB}[1]{\gdef\@emailB{#1}}

\newcommand{\@identification}{}
\newcommand{\identification}[1]{\gdef\@identification{#1}}


% 2013-09-04 ng Urs Kellers Vector Commands
\newcommand{\V}[1]{\boldsymbol{#1}}%Vektoren
\newcommand{\M}[1]{\mathbf{#1}}%Matrizen
\newcommand{\D}[2]{\frac{\partial #1}{\partial #2}}%partielle Ableitung



% Definition of Headers______________________________________________________
% for pages where no new chapter/Section starts
\setlength{\parindent}{0em}                 % Disable parindent
\fancyhf{}
\fancyhead[RE]{\slshape \nouppercase{\leftmark}}    % Even page header: "page   chapter"
\fancyhead[LO]{\slshape \nouppercase{\rightmark}}   % Odd  page header: "section   page"
\fancyhead[RO,LE]{\bfseries \thepage} 
\cfoot{}                                   						 % No page number on bottom

% first page of new chapter/Section starts
\fancypagestyle{plain}{   					    % No chapter+section on chapter start pages
	\setlength{\parindent}{0em}                 % Disable parindent
	\fancyhf{}
	\fancyhead[RO,LE]{\bfseries \thepage}
	\cfoot{}                                    % No page number on bottom
}

% Definition of title page______________________________________________________
\renewcommand{\maketitle}{

\pagestyle{empty}

\begin{center}
\hspace{0.02\textwidth}
\parbox[c][\textheight][t]{0.97\textwidth}{
\begin{center}

\vspace*{-2cm}

\begin{minipage}[c]{1.0\textwidth}
 \begin{flushleft}
 \hspace*{-1.5cm}
 \ifbalgrist 
 	\includegraphics[height=3.8cm]{img/headerBalgrist.eps}
 \else
	\includegraphics[height=3.8cm]{img/headerNoBalgrist.eps}
 \fi
 \end{flushleft}
\end{minipage}


\hfill

\vspace*{3.0cm}

{\large \@studentA\if\@studentB\else \ \& \@studentB\fi}
\vspace{1.5cm}

{\Huge \bf \@title \par}
\vspace{2.5cm} 

{\large \bf \@type}\\[3ex]
\ifingerman
 Labor f\"{u}r Sensomotorische Systeme\\
 Eidgen\"{o}ssische Technische Hochschule (ETH) Z\"{u}rich\\
\else
 Sensory-Motor Systems Lab\\
 Swiss Federal Institute of Technology (ETH) Zurich\\
\fi
\vspace{2.5cm}

\ifingerman
 {\bf Betreuung} \\[1.5ex]
\else
 {\bf Supervision} \\[1.5ex]
\fi
\@supervision

\vspace{1.0cm}

\ifingerman
 {\bf Mentor} \\[1.5ex]
\else
 {\bf Thesis Advisor} \\[1.5ex]
\fi
Prof. Dr. Robert Riener

\vfill
\@date

\end{center}
}
\end{center}
\cleardoublepage
}

% Declaration______________________________________________________
\newcommand{\createDeclaration}{
	\ifingerman
		\createDeclarationGerman
	\else
		\createDeclarationEnglish
	\fi
}

% Eigenst\"{a}ndigkeitserkl\"{a}rung______________________________________________________
\newcommand{\createDeclarationGerman}{
	
	\chapter*{Eigenst\"{a}ndigkeitserkl\"{a}rung\markboth{Eigenst\"{a}ndigkeitserkl\"{a}rung}{Eigenst\"{a}ndigkeitserkl\"{a}rung}}
		\addcontentsline{toc}{chapter}{\protect\numberline{}Eigenst\"{a}ndigkeitserkl\"{a}rung}

	\vspace{1cm}

	Ich erkl\"{a}re hiermit, dass es sich bei der von mir eingereichten schriftlichen Arbeit mit dem Titel

	\vspace{0.5cm}

	\textbf{\@title}

	\vspace{0.5cm}

	um eine von mir selbst\"{a}ndig und in eigenen Worten verfasste Originalarbeit handelt.\footnote{Bei Gruppenarbeiten sind die Unterschriften aller VerfasserInnen erforderlich. Durch die Unterschrift b\"{u}rgen Sie f\"{u}r den vollumf\"{a}nglichen Inhalt der Endversion dieser schriftlichen Arbeit.}

	\vspace{1cm}

	\textbf{VerfasserIn/VerfasserInnen}

	\vspace{0.5cm}

	\begin{tabular}{ p{5cm} p{5cm} }
  	\@studentA \if\@studentB\else \\ \@studentB\fi
	\end{tabular}

	\vspace{0.5cm}

	\textbf{Betreuende/r}

	\vspace{0.5cm}

	\begin{tabular}{ p{5cm} p{5cm} }
		\@supervision
	\end{tabular}

	\vspace{1cm}

	Mit meiner Unterschrift best\"{a}tige ich, dass ich \"{u}ber fach\"{u}bliche Zitierregeln unterrichtet worden bin und das Merkblatt (\url{http://www.ethz.ch/students/exams/plagiarism_s_de.pdf}) gelesen und verstanden habe. Die im betroffenen Fachgebiet \"{u}blichen Zitiervorschriften sind eingehalten
worden.

	\vspace{0.5cm}

	Eine \"{U}berpr\"{u}fung der Arbeit auf Plagiate mithilfe elektronischer Hilfsmittel darf vorgenommen
werden

	\vspace{2cm}
	
	%if second student insert second line for signature
	\if\@studentB\else 
		\begin{tabular}{ p{5cm} p{1cm} p{5cm} }
  		\cline{1-1} \cline{3-3}
		Ort, Datum & & Unterschrift \\
		\end{tabular}	
	\fi

	\vspace{2cm}
	\begin{tabular}{ p{5cm} p{1cm} p{5cm} }
  	\cline{1-1} \cline{3-3}
  	Ort, Datum & & Unterschrift \\
	\end{tabular}	
}

% Declaration of Originality______________________________________________________
\newcommand{\createDeclarationEnglish}{
	
	\chapter*{Declaration of Originality\markboth{Declaration of Originality}{Declaration of Originality}}
		\addcontentsline{toc}{chapter}{\protect\numberline{}Declaration of Originality}

	\vspace{1cm}

	I hereby declare that the written work I have submitted entitled

	\vspace{0.5cm}

	\textbf{\@title}

	\vspace{0.5cm}

	is original work which I alone have authored and which is written in my own words.\footnote{Co-authored work: The signatures of all authors are required. Each signature attests to the originality of the entire piece of written work in its final form.}

	\vspace{1cm}

	\textbf{Author(s)}

	\vspace{0.5cm}

	\begin{tabular}{ p{5cm} p{5cm} }
  	\@studentA \if\@studentB\else \\ \@studentB\fi
	\end{tabular}

	\vspace{0.5cm}

	\textbf{Supervision}

	\vspace{0.5cm}

	\begin{tabular}{ p{5cm} p{5cm} }
		\@supervision
	\end{tabular}

	\vspace{1cm}

	With the signature I declare that I have been informed regarding normal academic citation rules and that I have read and understood the information on 'Citation etiquette' (\url{http://www.ethz.ch/students/exams/plagiarism_s_en.pdf}). The citation conventions usual to the discipline in question here have been respected.

	\vspace{0.5cm}

	The above written work may be tested electronically for plagiarism.

	\vspace{2cm}
	
	%if second student insert second line for signature
	\if\@studentB\else 
		\begin{tabular}{ p{5cm} p{1cm} p{5cm} }
  		\cline{1-1} \cline{3-3}
		Place and date & & Signature \\
		\end{tabular}	
	\fi

	\vspace{2cm}
	\begin{tabular}{ p{5cm} p{1cm} p{5cm} }
  	\cline{1-1} \cline{3-3}
  	Place and date & & Signature \\
	\end{tabular}	
}



% =======================================
%	\usepackage[dvipdfm]{geometry}
	\setlength\paperheight {297mm}%
	\setlength\paperwidth  {210mm}%

	%PAGE LAYOUT 2cm margin on all four sides
	\setlength{\voffset}{-1in}
	\setlength{\hoffset}{-1in}

	\setlength{\oddsidemargin}{3cm}
	\setlength{\evensidemargin}{3cm}

	\setlength{\topmargin}{2.5cm} % -1in subtract latex default margin (1 inch) from topmargin

%	\setlength{\headheight}{14.mm} %platz für kopfzeile
%	\setlength{\headsep}{+11.mm} %freiraum nach kopfzeile
%	\addtolength{\topmargin}{0.0mm} %rest, damit die geforderten 2.5 cm erfüllt werden

	\setlength{\textheight}{229mm} %247mm 29.7cm-5cm = 24.7cm

%	\setlength{\footskip}{+20mm}

	\setlength{\textwidth}{150mm} %!!! %21cm - 5cm = 16cm


%	\addtolength{\oddsidemargin}{-1in} %subtract latex default margin (1 inch) from oddsidemargin
	

%	\addtolength{\evensidemargin}{-1in}  %subtract latex default margin (1 inch) from evensidemargin
%	\setlength{\marginparwidth}{10cm}
	\setlength{\parindent}{0pt}

% Revision history___________________________________________________________ 
% 2009/29/05 Adapted from ethimrt.sty,v 1.1 2004/04/02
